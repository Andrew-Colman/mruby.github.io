<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Enumerator
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/mruby.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!Enumerator.html";
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/mruby.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (E)</a> &raquo;
    
    
    <span class="title">Enumerator</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="header_list_link"
        href="header_list.html">
      Header List
    </a>
  
    <a class="full_list_link" id="function_list_link"
        href="function_list.html">
      Function List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Enumerator
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Enumerator</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="Enumerable.html" title="Enumerable (module)">Enumerable</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">mrbgems/mruby-enumerator/mrblib/enumerator.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>A class which allows both internal and external iteration.</p>

<p>An Enumerator can be created by the following methods.</p>

<ul>
<li><span class='object_link'><a href="Kernel.html#to_enum-instance_method" title="Kernel#to_enum (method)">Kernel#to_enum</a></span></li>
<li><span class='object_link'><a href="Kernel.html#enum_for-instance_method" title="Kernel#enum_for (method)">Kernel#enum_for</a></span></li>
<li><span class='object_link'><a href="#initialize-instance_method" title="Enumerator#initialize (method)">Enumerator.new</a></span></li>
</ul>

<p>Most methods have two forms: a block form where the contents
are evaluated for each item in the enumeration, and a non-block form
which returns a new Enumerator wrapping the iteration.</p>

<pre class="code ruby"><code class="ruby">  enumerator = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">%w(</span><span style="color:#D20">one two three</span><span style="color:#710">)</span></span>.each
  puts enumerator.class <span style="color:#777"># =&gt; Enumerator</span>

  enumerator.each_with_object(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">foo</span><span style="color:#710">&quot;</span></span>) <span style="color:#080;font-weight:bold">do</span> |item, obj|
    puts <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>obj<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>item<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">end</span>

  <span style="color:#777"># foo: one</span>
  <span style="color:#777"># foo: two</span>
  <span style="color:#777"># foo: three</span>

  enum_with_obj = enumerator.each_with_object(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">foo</span><span style="color:#710">&quot;</span></span>)
  puts enum_with_obj.class <span style="color:#777"># =&gt; Enumerator</span>

  enum_with_obj.each <span style="color:#080;font-weight:bold">do</span> |item, obj|
    puts <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>obj<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>item<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">end</span>

  <span style="color:#777"># foo: one</span>
  <span style="color:#777"># foo: two</span>
  <span style="color:#777"># foo: three</span>
</code></pre>

<p>This allows you to chain Enumerators together.  For example, you
can map a list&#39;s elements to strings containing the index
and the element as a string via:</p>

<pre class="code ruby"><code class="ruby">  puts <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">%w[</span><span style="color:#D20">foo bar baz</span><span style="color:#710">]</span></span>.map.with_index { |w, i| <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>i<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">:</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>w<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span> }
  <span style="color:#777"># =&gt; [&quot;0:foo&quot;, &quot;1:bar&quot;, &quot;2:baz&quot;]</span>
</code></pre>

<p>An Enumerator can also be used as an external iterator.
For example, Enumerator#next returns the next value of the iterator
or raises StopIteration if the Enumerator is at the end.</p>

<pre class="code ruby"><code class="ruby">  e = [<span style="color:#00D">1</span>,<span style="color:#00D">2</span>,<span style="color:#00D">3</span>].each   <span style="color:#777"># returns an enumerator object.</span>
  puts e.next   <span style="color:#777"># =&gt; 1</span>
  puts e.next   <span style="color:#777"># =&gt; 2</span>
  puts e.next   <span style="color:#777"># =&gt; 3</span>
  puts e.next   <span style="color:#777"># raises StopIteration</span>
</code></pre>

<p>You can use this to implement an internal iterator as follows:</p>

<pre class="code ruby"><code class="ruby">  <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">ext_each</span>(e)
    <span style="color:#080;font-weight:bold">while</span> <span style="color:#069">true</span>
      <span style="color:#080;font-weight:bold">begin</span>
        vs = e.next_values
      <span style="color:#080;font-weight:bold">rescue</span> <span style="color:#036;font-weight:bold">StopIteration</span>
        <span style="color:#080;font-weight:bold">return</span> <span style="color:#d70">$!</span>.result
      <span style="color:#080;font-weight:bold">end</span>
      y = <span style="color:#080;font-weight:bold">yield</span>(*vs)
      e.feed y
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>

  o = <span style="color:#036;font-weight:bold">Object</span>.new

  <span style="color:#080;font-weight:bold">def</span> o.<span style="color:#06B;font-weight:bold">each</span>
    puts <span style="color:#080;font-weight:bold">yield</span>
    puts <span style="color:#080;font-weight:bold">yield</span>(<span style="color:#00D">1</span>)
    puts <span style="color:#080;font-weight:bold">yield</span>(<span style="color:#00D">1</span>, <span style="color:#00D">2</span>)
    <span style="color:#00D">3</span>
  <span style="color:#080;font-weight:bold">end</span>

  <span style="color:#777"># use o.each as an internal iterator directly.</span>
  puts o.each {|*x| puts x; [<span style="color:#A60">:b</span>, *x] }
  <span style="color:#777"># =&gt; [], [:b], [1], [:b, 1], [1, 2], [:b, 1, 2], 3</span>

  <span style="color:#777"># convert o.each to an external iterator for</span>
  <span style="color:#777"># implementing an internal iterator.</span>
  puts ext_each(o.to_enum) {|*x| puts x; [<span style="color:#A60">:b</span>, *x] }
  <span style="color:#777"># =&gt; [], [:b], [1], [:b, 1], [1, 2], [:b, 1, 2], 3</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div>

<div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="Enumerable/Lazy.html" title="Enumerable::Lazy (class)">Enumerable::Lazy</a></span></p>
</div>
<h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Enumerator/Generator.html" title="Enumerator::Generator (class)">Generator</a></span>, <span class='object_link'><a href="Enumerator/Yielder.html" title="Enumerator::Yielder (class)">Yielder</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  



  <h2>Constant Summary</h2>
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="Enumerable.html" title="Enumerable (module)">Enumerable</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Enumerable.html#NONE-constant" title="Enumerable::NONE (constant)">Enumerable::NONE</a></span></p>


  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#args%3D-instance_method" title="#args= (instance method)">- (Object) <strong>args</strong> </a>
    

    
  </span>
  
  
  
    
    
      <span class="note title writeonly">writeonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Sets the attribute args.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#fib%3D-instance_method" title="#fib= (instance method)">- (Object) <strong>fib</strong> </a>
    

    
  </span>
  
  
  
    
    
      <span class="note title writeonly">writeonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Sets the attribute fib.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#meth%3D-instance_method" title="#meth= (instance method)">- (Object) <strong>meth</strong> </a>
    

    
  </span>
  
  
  
    
    
      <span class="note title writeonly">writeonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Sets the attribute meth.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#obj%3D-instance_method" title="#obj= (instance method)">- (Object) <strong>obj</strong> </a>
    

    
  </span>
  
  
  
    
    
      <span class="note title writeonly">writeonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Sets the attribute obj.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each-instance_method" title="#each (instance method)">- (Object) <strong>each</strong>(*argv, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>call-seq:   enum.each { |elm| block }                    -&gt; obj   enum.each                                    -&gt; enum   enum.each(<em>appending_args) { |elm| block }   -&gt; obj   enum.each(</em>appending_args)                   -&gt; an_enumerator.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each_with_index-instance_method" title="#each_with_index (instance method)">- (Object) <strong>each_with_index</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>call-seq:   e.each_with_index {|(*args), idx| ... }   e.each_with_index.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#feed-instance_method" title="#feed (instance method)">- (Object) <strong>feed</strong>(value) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>call-seq:   e.feed obj   -&gt; nil.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Enumerator) <strong>initialize</strong>(obj = nil, meth = :each, *args, &amp;block) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new Enumerator object, which can be used as an Enumerable.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize_copy-instance_method" title="#initialize_copy (instance method)">- (Object) <strong>initialize_copy</strong>(obj) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-instance_method" title="#inspect (instance method)">- (Object) <strong>inspect</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#next-instance_method" title="#next (instance method)">- (Object) <strong>next</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>call-seq:   e.next   -&gt; object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#next_values-instance_method" title="#next_values (instance method)">- (Object) <strong>next_values</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>call-seq:   e.next_values   -&gt; array.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#peek-instance_method" title="#peek (instance method)">- (Object) <strong>peek</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>call-seq:   e.peek   -&gt; object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#peek_values-instance_method" title="#peek_values (instance method)">- (Object) <strong>peek_values</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>call-seq:   e.peek_values   -&gt; array.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rewind-instance_method" title="#rewind (instance method)">- (Object) <strong>rewind</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>call-seq:   e.rewind   -&gt; e.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#with_index-instance_method" title="#with_index (instance method)">- (Object) <strong>with_index</strong>(offset = 0) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>call-seq:   e.with_index(offset = 0) {|(*args), idx| ... }   e.with_index(offset = 0).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#with_object-instance_method" title="#with_object (instance method)">- (Object) <strong>with_object</strong>(object) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>call-seq:   e.each_with_object(obj) {|(<em>args), obj| ... }   e.each_with_object(obj)   e.with_object(obj) {|(</em>args), obj| ... }   e.with_object(obj).</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Enumerable.html" title="Enumerable (module)">Enumerable</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Enumerable.html#__sort_sub__-instance_method" title="Enumerable#__sort_sub__ (method)">#__sort_sub__</a></span>, <span class='object_link'><a href="Enumerable.html#all%3F-instance_method" title="Enumerable#all? (method)">#all?</a></span>, <span class='object_link'><a href="Enumerable.html#any%3F-instance_method" title="Enumerable#any? (method)">#any?</a></span>, <span class='object_link'><a href="Enumerable.html#collect-instance_method" title="Enumerable#collect (method)">#collect</a></span>, <span class='object_link'><a href="Enumerable.html#count-instance_method" title="Enumerable#count (method)">#count</a></span>, <span class='object_link'><a href="Enumerable.html#cycle-instance_method" title="Enumerable#cycle (method)">#cycle</a></span>, <span class='object_link'><a href="Enumerable.html#detect-instance_method" title="Enumerable#detect (method)">#detect</a></span>, <span class='object_link'><a href="Enumerable.html#drop-instance_method" title="Enumerable#drop (method)">#drop</a></span>, <span class='object_link'><a href="Enumerable.html#drop_while-instance_method" title="Enumerable#drop_while (method)">#drop_while</a></span>, <span class='object_link'><a href="Enumerable.html#each_cons-instance_method" title="Enumerable#each_cons (method)">#each_cons</a></span>, <span class='object_link'><a href="Enumerable.html#each_slice-instance_method" title="Enumerable#each_slice (method)">#each_slice</a></span>, <span class='object_link'><a href="Enumerable.html#each_with_object-instance_method" title="Enumerable#each_with_object (method)">#each_with_object</a></span>, <span class='object_link'><a href="Enumerable.html#entries-instance_method" title="Enumerable#entries (method)">#entries</a></span>, <span class='object_link'><a href="Enumerable.html#find_all-instance_method" title="Enumerable#find_all (method)">#find_all</a></span>, <span class='object_link'><a href="Enumerable.html#find_index-instance_method" title="Enumerable#find_index (method)">#find_index</a></span>, <span class='object_link'><a href="Enumerable.html#first-instance_method" title="Enumerable#first (method)">#first</a></span>, <span class='object_link'><a href="Enumerable.html#flat_map-instance_method" title="Enumerable#flat_map (method)">#flat_map</a></span>, <span class='object_link'><a href="Enumerable.html#grep-instance_method" title="Enumerable#grep (method)">#grep</a></span>, <span class='object_link'><a href="Enumerable.html#group_by-instance_method" title="Enumerable#group_by (method)">#group_by</a></span>, <span class='object_link'><a href="Enumerable.html#hash-instance_method" title="Enumerable#hash (method)">#hash</a></span>, <span class='object_link'><a href="Enumerable.html#include%3F-instance_method" title="Enumerable#include? (method)">#include?</a></span>, <span class='object_link'><a href="Enumerable.html#inject-instance_method" title="Enumerable#inject (method)">#inject</a></span>, <span class='object_link'><a href="Enumerable.html#lazy-instance_method" title="Enumerable#lazy (method)">#lazy</a></span>, <span class='object_link'><a href="Enumerable.html#max-instance_method" title="Enumerable#max (method)">#max</a></span>, <span class='object_link'><a href="Enumerable.html#max_by-instance_method" title="Enumerable#max_by (method)">#max_by</a></span>, <span class='object_link'><a href="Enumerable.html#min-instance_method" title="Enumerable#min (method)">#min</a></span>, <span class='object_link'><a href="Enumerable.html#min_by-instance_method" title="Enumerable#min_by (method)">#min_by</a></span>, <span class='object_link'><a href="Enumerable.html#minmax-instance_method" title="Enumerable#minmax (method)">#minmax</a></span>, <span class='object_link'><a href="Enumerable.html#minmax_by-instance_method" title="Enumerable#minmax_by (method)">#minmax_by</a></span>, <span class='object_link'><a href="Enumerable.html#none%3F-instance_method" title="Enumerable#none? (method)">#none?</a></span>, <span class='object_link'><a href="Enumerable.html#one%3F-instance_method" title="Enumerable#one? (method)">#one?</a></span>, <span class='object_link'><a href="Enumerable.html#partition-instance_method" title="Enumerable#partition (method)">#partition</a></span>, <span class='object_link'><a href="Enumerable.html#reject-instance_method" title="Enumerable#reject (method)">#reject</a></span>, <span class='object_link'><a href="Enumerable.html#reverse_each-instance_method" title="Enumerable#reverse_each (method)">#reverse_each</a></span>, <span class='object_link'><a href="Enumerable.html#sort-instance_method" title="Enumerable#sort (method)">#sort</a></span>, <span class='object_link'><a href="Enumerable.html#sort_by-instance_method" title="Enumerable#sort_by (method)">#sort_by</a></span>, <span class='object_link'><a href="Enumerable.html#take-instance_method" title="Enumerable#take (method)">#take</a></span>, <span class='object_link'><a href="Enumerable.html#take_while-instance_method" title="Enumerable#take_while (method)">#take_while</a></span>, <span class='object_link'><a href="Enumerable.html#to_h-instance_method" title="Enumerable#to_h (method)">#to_h</a></span>, <span class='object_link'><a href="Enumerable.html#to_h-class_method" title="Enumerable.to_h (method)">to_h</a></span>, <span class='object_link'><a href="Enumerable.html#zip-instance_method" title="Enumerable#zip (method)">#zip</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    
      <span class="overload">- (<tt><span class='object_link'><a href="" title="Enumerator (class)">Enumerator</a></span></tt>) <strong>initialize</strong>(size = nil, &amp;block) </span>
    
      <span class="overload">- (<tt><span class='object_link'><a href="" title="Enumerator (class)">Enumerator</a></span></tt>) <strong>initialize</strong>(obj, method = :each, *args) </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a new Enumerator object, which can be used as an
Enumerable.</p>

<p>In the first form, iteration is defined by the given block, in
which a &quot;yielder&quot; object, given as block parameter, can be used to
yield a value by calling the +yield+ method (aliased as +&lt;&lt;+):</p>

<pre class="code ruby"><code class="ruby">fib = <span style="color:#036;font-weight:bold">Enumerator</span>.new <span style="color:#080;font-weight:bold">do</span> |y|
  a = b = <span style="color:#00D">1</span>
  loop <span style="color:#080;font-weight:bold">do</span>
    y &lt;&lt; a
    a, b = b, a + b
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

p fib.take(<span style="color:#00D">10</span>) <span style="color:#777"># =&gt; [1, 1, 2, 3, 5, 8, 13, 21, 34, 55]</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 112</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">initialize</span>(obj=<span style="color:#069">nil</span>, meth=<span style="color:#A60">:each</span>, *args, &amp;block)
  <span style="color:#080;font-weight:bold">if</span> block_given?
    obj = <span style="color:#036;font-weight:bold">Generator</span>.new(&amp;block)
  <span style="color:#080;font-weight:bold">else</span>
    raise <span style="color:#036;font-weight:bold">ArgumentError</span> <span style="color:#080;font-weight:bold">unless</span> obj
  <span style="color:#080;font-weight:bold">end</span>

  <span style="color:#33B">@obj</span> = obj
  <span style="color:#33B">@meth</span> = meth
  <span style="color:#33B">@args</span> = args.dup
  <span style="color:#33B">@fib</span> = <span style="color:#069">nil</span>
  <span style="color:#33B">@dst</span> = <span style="color:#069">nil</span>
  <span style="color:#33B">@lookahead</span> = <span style="color:#069">nil</span>
  <span style="color:#33B">@feedvalue</span> = <span style="color:#069">nil</span>
  <span style="color:#33B">@stop_exc</span> = <span style="color:#069">false</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="args-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="args=-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>args=</strong>(value) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Sets the attribute args</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


128
129
130</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 128</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">args=</span>(value)
  <span style="color:#33B">@args</span> = value
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="fib-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="fib=-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>fib=</strong>(value) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Sets the attribute fib</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


128
129
130</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 128</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">fib=</span>(value)
  <span style="color:#33B">@fib</span> = value
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="meth-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="meth=-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>meth=</strong>(value) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Sets the attribute meth</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


128
129
130</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 128</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">meth=</span>(value)
  <span style="color:#33B">@meth</span> = value
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="obj-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="obj=-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>obj=</strong>(value) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Sets the attribute obj</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


128
129
130</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 128</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">obj=</span>(value)
  <span style="color:#33B">@obj</span> = value
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="each-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>each</strong>(*argv, &amp;block) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>call-seq:
  enum.each { |elm| block }                    -&gt; obj
  enum.each                                    -&gt; enum
  enum.each(<em>appending_args) { |elm| block }   -&gt; obj
  enum.each(</em>appending_args)                   -&gt; an_enumerator</p>

<p>Iterates over the block according to how this Enumerator was constructed.
If no block and no arguments are given, returns self.</p>

<p>=== Examples</p>

<p>&quot;Hello, world!&quot;.scan(/\w+/)                     #=&gt; [&quot;Hello&quot;, &quot;world&quot;]
  &quot;Hello, world!&quot;.to_enum(:scan, /\w+/).to_a      #=&gt; [&quot;Hello&quot;, &quot;world&quot;]
  &quot;Hello, world!&quot;.to_enum(:scan).each(/\w+/).to_a #=&gt; [&quot;Hello&quot;, &quot;world&quot;]</p>

<p>obj = Object.new</p>

<p>def obj.each_arg(a, b=:b, *rest)
    yield a
    yield b
    yield rest
    :method_returned
  end</p>

<p>enum = obj.to_enum :each_arg, :a, :x</p>

<p>enum.each.to_a                  #=&gt; [:a, :x, []]
  enum.each.equal?(enum)          #=&gt; true
  enum.each { |elm| elm }         #=&gt; :method_returned</p>

<p>enum.each(:y, :z).to_a          #=&gt; [:a, :x, [:y, :z]]
  enum.each(:y, :z).equal?(enum)  #=&gt; false
  enum.each(:y, :z) { |elm| elm } #=&gt; :method_returned</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 261</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">each</span>(*argv, &amp;block)
  obj = <span style="color:#069">self</span>
  <span style="color:#080;font-weight:bold">if</span> <span style="color:#00D">0</span> &lt; argv.length
    obj = <span style="color:#069">self</span>.dup
    args = obj.args
    <span style="color:#080;font-weight:bold">if</span> !args.empty?
      args = args.dup
      args.concat argv
    <span style="color:#080;font-weight:bold">else</span>
      args = argv.dup
    <span style="color:#080;font-weight:bold">end</span>
    obj.args = args
  <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">return</span> obj <span style="color:#080;font-weight:bold">unless</span> block_given?
  enumerator_block_call(&amp;block)
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="each_with_index-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>each_with_index</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>call-seq:
  e.each_with_index {|(*args), idx| ... }
  e.each_with_index</p>

<p>Same as Enumerator#with_index(0), i.e. there is no starting offset.</p>

<p>If no block is given, a new Enumerator is returned that includes the index.</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


174
175
176</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 174</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">each_with_index</span>
  with_index
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="feed-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>feed</strong>(value) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>call-seq:
  e.feed obj   -&gt; nil</p>

<p>Sets the value to be returned by the next yield inside +e+.</p>

<p>If the value is not set, the yield returns nil.</p>

<p>This value is cleared after being yielded.</p>

<p># Array#map passes the array&#39;s elements to &quot;yield&quot; and collects the
  # results of &quot;yield&quot; as an array.
  # Following example shows that &quot;next&quot; returns the passed elements and
  # values passed to &quot;feed&quot; are collected as an array which can be
  # obtained by StopIteration#result.
  e = [1,2,3].map
  p e.next           #=&gt; 1
  e.feed &quot;a&quot;
  p e.next           #=&gt; 2
  e.feed &quot;b&quot;
  p e.next           #=&gt; 3
  e.feed &quot;c&quot;
  begin
    e.next
  rescue StopIteration
    p $!.result      #=&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]
  end</p>

<p>o = Object.new
  def o.each
    x = yield         # (2) blocks
    p x               # (5) =&gt; &quot;foo&quot;
    x = yield         # (6) blocks
    p x               # (8) =&gt; nil
    x = yield         # (9) blocks
    p x               # not reached w/o another e.next
  end</p>

<p>e = o.to_enum
  e.next              # (1)
  e.feed &quot;foo&quot;        # (3)
  e.next              # (4)
  e.next              # (7)
                      # (10)</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="TypeError.html" title="TypeError (class)">TypeError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


511
512
513
514
515</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 511</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">feed</span>(value)
  raise <span style="color:#036;font-weight:bold">TypeError</span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">feed value already set</span><span style="color:#710">&quot;</span></span> <span style="color:#080;font-weight:bold">if</span> <span style="color:#33B">@feedvalue</span>
  <span style="color:#33B">@feedvalue</span> = value
  <span style="color:#069">nil</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="initialize_copy-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>initialize_copy</strong>(obj) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="TypeError.html" title="TypeError (class)">TypeError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


131
132
133
134
135
136
137
138
139
140
141</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 131</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">initialize_copy</span>(obj)
  raise <span style="color:#036;font-weight:bold">TypeError</span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">can't copy type </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>obj.class<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span> <span style="color:#080;font-weight:bold">unless</span> obj.kind_of? <span style="color:#036;font-weight:bold">Enumerator</span>
  raise <span style="color:#036;font-weight:bold">TypeError</span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">can't copy execution context</span><span style="color:#710">&quot;</span></span> <span style="color:#080;font-weight:bold">if</span> obj.fib
  <span style="color:#33B">@obj</span> = obj.obj
  <span style="color:#33B">@meth</span> = obj.meth
  <span style="color:#33B">@args</span> = obj.args
  <span style="color:#33B">@fib</span> = <span style="color:#069">nil</span>
  <span style="color:#33B">@lookahead</span> = <span style="color:#069">nil</span>
  <span style="color:#33B">@feedvalue</span> = <span style="color:#069">nil</span>
  <span style="color:#069">self</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inspect-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>inspect</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


215
216
217
218
219
220
221
222
223
224</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 215</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">inspect</span>
  <span style="color:#080;font-weight:bold">return</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#&lt;</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span><span style="color:#069">self</span>.class<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">: uninitialized&gt;</span><span style="color:#710">&quot;</span></span> <span style="color:#080;font-weight:bold">unless</span> <span style="color:#33B">@obj</span>

  <span style="color:#080;font-weight:bold">if</span> <span style="color:#33B">@args</span> &amp;&amp; <span style="color:#33B">@args</span>.size &gt; <span style="color:#00D">0</span>
    args = <span style="color:#33B">@args</span>.join(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">, </span><span style="color:#710">&quot;</span></span>)
    <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#&lt;</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span><span style="color:#069">self</span>.class<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span><span style="color:#33B">@obj</span><span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">:</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span><span style="color:#33B">@meth</span><span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">(</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>args<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">)&gt;</span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">else</span>
    <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#&lt;</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span><span style="color:#069">self</span>.class<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span><span style="color:#33B">@obj</span><span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">:</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span><span style="color:#33B">@meth</span><span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">&gt;</span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="next-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>next</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>call-seq:
  e.next   -&gt; object</p>

<p>Returns the next object in the enumerator, and move the internal position
forward.  When the position reached at the end, StopIteration is raised.</p>

<p>=== Example</p>

<p>a = [1,2,3]
  e = a.to_enum
  p e.next   #=&gt; 1
  p e.next   #=&gt; 2
  p e.next   #=&gt; 3
  p e.next   #raises StopIteration</p>

<p>Note that enumeration sequence by +next+ does not affect other non-external
enumeration methods, unless the underlying iteration methods itself has
side-effect</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


303
304
305</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 303</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">next</span>
  next_values.__svalue
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="next_values-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>next_values</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>call-seq:
  e.next_values   -&gt; array</p>

<p>Returns the next object as an array in the enumerator, and move the
internal position forward.  When the position reached at the end,
StopIteration is raised.</p>

<p>This method can be used to distinguish <code>yield</code> and <code>yield
nil</code>.</p>

<p>=== Example</p>

<p>o = Object.new
  def o.each
    yield
    yield 1
    yield 1, 2
    yield nil
    yield [1, 2]
  end
  e = o.to_enum
  p e.next_values
  p e.next_values
  p e.next_values
  p e.next_values
  p e.next_values
  e = o.to_enum
  p e.next
  p e.next
  p e.next
  p e.next
  p e.next</p>

<p>## yield args       next_values      next
  #  yield            []               nil
  #  yield 1          [1]              1
  #  yield 1, 2       [1, 2]           [1, 2]
  #  yield nil        [nil]            nil
  #  yield [1, 2]     [[1, 2]]         [1, 2]</p>

<p>Note that +next_values+ does not affect other non-external enumeration
methods unless underlying iteration method itself has side-effect</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>@stop_exc</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 351</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">next_values</span>
  <span style="color:#080;font-weight:bold">if</span> <span style="color:#33B">@lookahead</span>
    vs = <span style="color:#33B">@lookahead</span>
    <span style="color:#33B">@lookahead</span> = <span style="color:#069">nil</span>
    <span style="color:#080;font-weight:bold">return</span> vs
  <span style="color:#080;font-weight:bold">end</span>
  raise <span style="color:#33B">@stop_exc</span> <span style="color:#080;font-weight:bold">if</span> <span style="color:#33B">@stop_exc</span>

  curr = <span style="color:#036;font-weight:bold">Fiber</span>.current

  <span style="color:#080;font-weight:bold">if</span> !<span style="color:#33B">@fib</span> || !<span style="color:#33B">@fib</span>.alive?
    <span style="color:#33B">@dst</span> = curr
    <span style="color:#33B">@fib</span> = <span style="color:#036;font-weight:bold">Fiber</span>.new <span style="color:#080;font-weight:bold">do</span>
      result = each <span style="color:#080;font-weight:bold">do</span> |*args|
        feedvalue = <span style="color:#069">nil</span>
        <span style="color:#036;font-weight:bold">Fiber</span>.yield args
        <span style="color:#080;font-weight:bold">if</span> <span style="color:#33B">@feedvalue</span>
          feedvalue = <span style="color:#33B">@feedvalue</span>
          <span style="color:#33B">@feedvalue</span> = <span style="color:#069">nil</span>
        <span style="color:#080;font-weight:bold">end</span>
        feedvalue
      <span style="color:#080;font-weight:bold">end</span>
      <span style="color:#33B">@stop_exc</span> = <span style="color:#036;font-weight:bold">StopIteration</span>.new <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">iteration reached an end</span><span style="color:#710">&quot;</span></span>
      <span style="color:#33B">@stop_exc</span>.result = result
      <span style="color:#036;font-weight:bold">Fiber</span>.yield <span style="color:#069">nil</span>
    <span style="color:#080;font-weight:bold">end</span>
    <span style="color:#33B">@lookahead</span> = <span style="color:#069">nil</span>
  <span style="color:#080;font-weight:bold">end</span>

  vs = <span style="color:#33B">@fib</span>.resume curr
  <span style="color:#080;font-weight:bold">if</span> <span style="color:#33B">@stop_exc</span>
    <span style="color:#33B">@fib</span> = <span style="color:#069">nil</span>
    <span style="color:#33B">@dst</span> = <span style="color:#069">nil</span>
    <span style="color:#33B">@lookahead</span> = <span style="color:#069">nil</span>
    <span style="color:#33B">@feedvalue</span> = <span style="color:#069">nil</span>
    raise <span style="color:#33B">@stop_exc</span>
  <span style="color:#080;font-weight:bold">end</span>
  vs
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="peek-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>peek</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>call-seq:
  e.peek   -&gt; object</p>

<p>Returns the next object in the enumerator, but doesn&#39;t move the internal
position forward.  If the position is already at the end, StopIteration
is raised.</p>

<p>=== Example</p>

<p>a = [1,2,3]
  e = a.to_enum
  p e.next   #=&gt; 1
  p e.peek   #=&gt; 2
  p e.peek   #=&gt; 2
  p e.peek   #=&gt; 2
  p e.next   #=&gt; 2
  p e.next   #=&gt; 3
  p e.next   #raises StopIteration</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


411
412
413</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 411</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">peek</span>
  peek_values.__svalue
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="peek_values-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>peek_values</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>call-seq:
  e.peek_values   -&gt; array</p>

<p>Returns the next object as an array, similar to Enumerator#next_values, but
doesn&#39;t move the internal position forward.  If the position is already at
the end, StopIteration is raised.</p>

<p>=== Example</p>

<p>o = Object.new
  def o.each
    yield
    yield 1
    yield 1, 2
  end
  e = o.to_enum
  p e.peek_values    #=&gt; []
  e.next
  p e.peek_values    #=&gt; [1]
  p e.peek_values    #=&gt; [1]
  e.next
  p e.peek_values    #=&gt; [1, 2]
  e.next
  p e.peek_values    # raises StopIteration</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


441
442
443
444
445
446</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 441</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">peek_values</span>
  <span style="color:#080;font-weight:bold">if</span> <span style="color:#33B">@lookahead</span>.nil?
    <span style="color:#33B">@lookahead</span> = next_values
  <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#33B">@lookahead</span>.dup
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rewind-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>rewind</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>call-seq:
  e.rewind   -&gt; e</p>

<p>Rewinds the enumeration sequence to the beginning.</p>

<p>If the enclosed object responds to a &quot;rewind&quot; method, it is called.</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


456
457
458
459
460
461
462
463
464</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 456</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">rewind</span>
  <span style="color:#33B">@obj</span>.rewind <span style="color:#080;font-weight:bold">if</span> <span style="color:#33B">@obj</span>.respond_to? <span style="color:#A60">:rewind</span>
  <span style="color:#33B">@fib</span> = <span style="color:#069">nil</span>
  <span style="color:#33B">@dst</span> = <span style="color:#069">nil</span>
  <span style="color:#33B">@lookahead</span> = <span style="color:#069">nil</span>
  <span style="color:#33B">@feedvalue</span> = <span style="color:#069">nil</span>
  <span style="color:#33B">@stop_exc</span> = <span style="color:#069">false</span>
  <span style="color:#069">self</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="with_index-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>with_index</strong>(offset = 0) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>call-seq:
  e.with_index(offset = 0) {|(*args), idx| ... }
  e.with_index(offset = 0)</p>

<p>Iterates the given block for each element with an index, which
starts from +offset+.  If no block is given, returns a new Enumerator
that includes the index, starting from +offset+</p>

<p>+offset+:: the starting index to use</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="TypeError.html" title="TypeError (class)">TypeError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


154
155
156
157
158
159
160
161
162
163</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 154</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">with_index</span>(offset=<span style="color:#00D">0</span>)
  <span style="color:#080;font-weight:bold">return</span> to_enum <span style="color:#A60">:with_index</span>, offset <span style="color:#080;font-weight:bold">unless</span> block_given?
  raise <span style="color:#036;font-weight:bold">TypeError</span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">no implicit conversion of </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>offset.class<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20"> into Integer</span><span style="color:#710">&quot;</span></span> <span style="color:#080;font-weight:bold">unless</span> offset.respond_to?(<span style="color:#A60">:to_int</span>)

  n = offset.to_int - <span style="color:#00D">1</span>
  enumerator_block_call <span style="color:#080;font-weight:bold">do</span> |i|
    n += <span style="color:#00D">1</span>
    <span style="color:#080;font-weight:bold">yield</span> [i,n]
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="with_object-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>with_object</strong>(object) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>call-seq:
  e.each_with_object(obj) {|(<em>args), obj| ... }
  e.each_with_object(obj)
  e.with_object(obj) {|(</em>args), obj| ... }
  e.with_object(obj)</p>

<p>Iterates the given block for each element with an arbitrary object, +obj+,
and returns +obj+</p>

<p>If no block is given, returns a new Enumerator.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code>to_three = <span style="color:#036;font-weight:bold">Enumerator</span>.new <span style="color:#080;font-weight:bold">do</span> |y|
  <span style="color:#00D">3</span>.times <span style="color:#080;font-weight:bold">do</span> |x|
    y &lt;&lt; x
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

to_three_with_string = to_three.with_object(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">foo</span><span style="color:#710">&quot;</span></span>)
to_three_with_string.each <span style="color:#080;font-weight:bold">do</span> |x,string|
  puts <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>string<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>x<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#777"># =&gt; foo:0</span>
<span style="color:#777"># =&gt; foo:1</span>
<span style="color:#777"># =&gt; foo:2</span></code></pre>
    
  </div>


</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


206
207
208
209
210
211
212
213</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-enumerator/mrblib/enumerator.rb', line 206</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">with_object</span>(object)
  <span style="color:#080;font-weight:bold">return</span> to_enum(<span style="color:#A60">:with_object</span>, object) <span style="color:#080;font-weight:bold">unless</span> block_given?

  enumerator_block_call <span style="color:#080;font-weight:bold">do</span> |i|
    <span style="color:#080;font-weight:bold">yield</span> [i,object]
  <span style="color:#080;font-weight:bold">end</span>
  object
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Sun Jan 17 01:23:06 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 in <a href="https://github.com/sagmor/yard-mruby">mruby mode</a> 0.2.2 (ruby-2.2.3).
</div>

  </body>
</html>